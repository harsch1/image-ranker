<div class="main-div">
  <mat-toolbar class="mat-elevation-z6" style="position: fixed; top: 0; z-index: 2" color='primary'>
    <span> Image Ranker </span>
  </mat-toolbar>
  <div style="flex: 1; display: flex; flex-direction: column; padding: 30px 30px">
    <h2>Rank Some Images</h2>
    <mat-accordion  class="example-headers-align">
<!--      Name panel-->
      <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <span>User info</span>
        </mat-panel-title>
        <mat-panel-description>
          Enter your name
        </mat-panel-description>
      </mat-expansion-panel-header>

      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput [formControl]="name" required>
        <mat-error *ngIf="name.invalid">{{getErrorMessage(name)}}</mat-error>
      </mat-form-field>

      <mat-action-row>
        <button mat-button color="primary" (click)="nextStep()" type="submit">Next</button>
      </mat-action-row>
    </mat-expansion-panel>

<!--      Images panel-->
      <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" [disabled]="nameForm.invalid">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Images
          </mat-panel-title>
          <mat-panel-description>
            View the full size images
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div style="padding: 5px 0;">
          <mat-grid-list
                         [cols]="colNum" rowHeight="272px"
                         (window:resize)="onResize($event)"
                         gutterSize="10px">
            <mat-grid-tile *ngFor="let icon of icons">
              <div class="icon-panel">
                <div class="image-holder">
                  <img *ngIf="icon.url != undefined" [src]="icon.url" style="max-height: 200px; max-width: 200px" (click)="openFullImage(icon.url)"/>
<!--                  <img *ngIf="icon.url != undefined" [src]="icon.url" style="max-height: 200px; max-width: 200px"/>-->
                  <div *ngIf="icon.url == undefined" style="background: #515151; height: 200px; width: 200px; text-align: center;">
                    <i>No Image!</i>
                  </div>
                </div>
                <div style="vertical-align: center; text-align: center">
                  {{icon.title}}
                </div>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
        </div>

        <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" (click)="nextStep()">Next</button>
        </mat-action-row>
      </mat-expansion-panel>

      <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)"  [disabled]="nameForm.invalid">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Day of the trip
          </mat-panel-title>
          <mat-panel-description>
            Inform the date you wish to travel
          </mat-panel-description>
        </mat-expansion-panel-header>

        <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" (click)="nextStep()">End</button>
        </mat-action-row>
      </mat-expansion-panel>

    </mat-accordion>
  </div>
</div>


<ng-template #fullSize let-data>

  <mat-dialog-content *ngIf="data.width < 652">
    <img [src]="data.url" [width]="data.width" />
  </mat-dialog-content>
  <img *ngIf="data.width >= 652" [src]="data.url" style = "max-width: 652px; max-height: 652px;">
</ng-template>
